<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
'http://www.w3.org/TR/xhtmll/DTD/xhtmll-transitional.dtd'>

<html xmlns='http://www.w3.org/1999/xhtml'>

<head>

    <title>Fnord-O-Meter</title>
    
    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
    <meta name='Abstract' contest='A tool for automated psychohistorical text analysis' />
    <meta name='author' content='daniel l swartzendruber' />
    
	<!-- hypertag Tempates runtime -->
    <link href="common/hypertag/verbs.css" media="all" rel="stylesheet" type="text/css"></link>
    <script src="common/hypertag/Hypertag.min.js" type="text/javascript"></script>
    <script url="common/hypertag/builtins.hyp" type="text/javascript"></script>

    <!-- Fnordometer Code -->
    <link rel='stylesheet' href='fnord/fnordometer.css'></link>
    <script type='text/javascript' src='fnord/fnordometerspeeches.js'></script>
    <script type='text/javascript' src='fnord/fnordometer.js'></script>

</head>
<script type="text/javascript"> 
    // A wrapper for localStorage that gives us an objet-aware storage/retrevial mechanism
    var localstore = {};
    localstore.set = function(key,item){
        try{ var processed_item = JSON.stringify(item) }
        catch(e){}//nothing needed here. if it failed we have a string
        localStorage.setItem(key, processed_item ? processed_item : item);
    }
    localstore.get = function(key){
        var item = localStorage.getItem(key);
        try{ item = JSON.parse(item); }
        catch(e){}//nothing needed here. if it failed we just get a string
        return item;
    }
    localstore.setItem = localStorage.setItem;
    localstore.getItem = localStorage.getItem;
</script>

<script id="application" type="text/hypertag">
    <!-- dialect shml -->
    __init__:function(){
        // make a new fnordometer and put it on this top level container
        self.fnordometer = Fnordometer();
    }
    <view name="texttoanalyzebox">
    
    <view name="resultbox">
    
    <view name="textlist">
        list:function(){
            // Check for the presence of user data.  If none we use the default examples
            var texts = localstore.get("usertexts");
            if(typeof texts == Array) return texts;
            else return fnordometerspeeches;
        },
        __click__:function(item){
            console.log(item.data.text);
        }
        <div>
            <div title="[=description=]"
                 class="fggreen blue">
                [=title=]
</script>


<body>
    <div class="hypertag" template="application"></div>
</body>

</html>
